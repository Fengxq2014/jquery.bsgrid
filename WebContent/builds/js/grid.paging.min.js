/**
* jQuery.bsgrid v1.20 by @Baishui2004
* Copyright 2014 Apache v2 License
* https://github.com/baishui2004/jquery.bsgrid
*/
(function(a){a.fn.bsgrid_paging={defaults:{pageSize:20,pageSizeSelect:false,pageSizeForGrid:[5,10,20,25,50,100,200,500],pagingBtnClass:"pagingBtn"},pagingObjs:{},init:function(e,d){var c={settings:a.extend(true,{},a.fn.bsgrid_paging.defaults,d),pagingId:e,totalRowsId:e+"_totalRows",totalPagesId:e+"_totalPages",curPageId:e+"_curPage",gotoPageInputId:e+"_gotoPageInput",gotoPageId:e+"_gotoPage",pageSizeId:e+"_pageSize",firstPageId:e+"_firstPage",prevPageId:e+"_prevPage",nextPageId:e+"_nextPage",lastPageId:e+"_lastPage",startRowId:e+"_startRow",endRowId:e+"_endRow",totalRows:0,totalPages:0,curPage:1,curPageRowsNum:0,startRow:0,endRow:0};var b={options:c,page:function(f){a.fn.bsgrid_paging.page(f,c)},getCurPage:function(){return a.fn.bsgrid_paging.getCurPage(c)},refreshPage:function(){a.fn.bsgrid_paging.refreshPage(c)},firstPage:function(){a.fn.bsgrid_paging.firstPage(c)},prevPage:function(){a.fn.bsgrid_paging.prevPage(c)},nextPage:function(){a.fn.bsgrid_paging.nextPage(c)},lastPage:function(){a.fn.bsgrid_paging.lastPage(c)},gotoPage:function(f){a.fn.bsgrid_paging.gotoPage(c,f)},createPagingToolbar:function(){return a.fn.bsgrid_paging.createPagingToolbar(c)},setPagingToolbarEvents:function(){a.fn.bsgrid_paging.setPagingToolbarEvents(c)},dynamicChangePagingButtonStyle:function(){a.fn.bsgrid_paging.dynamicChangePagingButtonStyle(c)},resetPerPageValues:function(){a.fn.bsgrid_paging.resetPerPageValues(c)},setPagingValues:function(g,f){a.fn.bsgrid_paging.setPagingValues(g,f,c)}};a.fn.bsgrid_paging.pagingObjs[e]=b;a("#"+e).append(b.createPagingToolbar());b.setPagingToolbarEvents();return b},getPagingObj:function(c){var b=a.fn.bsgrid_paging.pagingObjs[c];return b?b:null},page:function(c,b){var d=a.fn.bsgrid.getGridObj(b.settings.gridId);d.options.settings.pageSize=b.settings.pageSize;d.options.curPage=b.curPage;a.fn.bsgrid.page(c,d.options)},getCurPage:function(b){var c=a("#"+b.curPageId).html();return c==""?1:c},refreshPage:function(b){a.fn.bsgrid_paging.page(a.fn.bsgrid_paging.getCurPage(b),b)},firstPage:function(b){var c=a.fn.bsgrid_paging.getCurPage(b);if(c<=1){alert(a.bsgridLanguage.isFirstPage);return}a.fn.bsgrid_paging.page(1,b)},prevPage:function(b){var c=a.fn.bsgrid_paging.getCurPage(b);if(c<=1){alert(a.bsgridLanguage.isFirstPage);return}a.fn.bsgrid_paging.page(parseInt(c)-1,b)},nextPage:function(b){var c=a.fn.bsgrid_paging.getCurPage(b);if(c>=b.totalPages){alert(a.bsgridLanguage.isLastPage);return}a.fn.bsgrid_paging.page(parseInt(c)+1,b)},lastPage:function(b){var c=a.fn.bsgrid_paging.getCurPage(b);if(c>=b.totalPages){alert(a.bsgridLanguage.isLastPage);return}a.fn.bsgrid_paging.page(b.totalPages,b)},gotoPage:function(b,c){if(c==undefined){c=a("#"+b.gotoPageInputId).val()}if(isNaN(c)){alert(a.bsgridLanguage.needInteger)}else{if(parseInt(c)<1||parseInt(c)>b.totalPages){alert(a.bsgridLanguage.needRange(1,b.totalPages))}else{a("#"+b.gotoPageInputId).val(c);a.fn.bsgrid_paging.page(parseInt(c),b)}}},createPagingToolbar:function(b){var d=new StringBuilder();d.append('<table class="'+(b.settings.pageSizeSelect?"":"noPageSizeSelect")+'">');d.append("<tr>");if(b.settings.pageSizeSelect){if(a.inArray(b.settings.pageSize,b.settings.pageSizeForGrid)==-1){b.settings.pageSizeForGrid.push(b.settings.pageSize)}d.append("<td>"+a.bsgridLanguage.pagingToolbar.pageSizeDisplay(b.pageSizeId)+"</td>")}d.append("<td>"+a.bsgridLanguage.pagingToolbar.currentDisplayRows(b.startRowId,b.endRowId)+"</td>");d.append("<td>"+a.bsgridLanguage.pagingToolbar.totalRows(b.totalRowsId)+"</td>");var c=b.settings.pagingBtnClass;d.append("<td>");d.append('<input class="'+c+' firstPage" type="button" id="'+b.firstPageId+'" value="'+a.bsgridLanguage.pagingToolbar.firstPage+'" />');d.append("&nbsp;&nbsp;");d.append('<input class="'+c+' prevPage" type="button" id="'+b.prevPageId+'" value="'+a.bsgridLanguage.pagingToolbar.prevPage+'" />');d.append("</td>");d.append("<td>"+a.bsgridLanguage.pagingToolbar.currentDisplayPageAndTotalPages(b.curPageId,b.totalPagesId)+"</td>");d.append("<td>");d.append('<input class="'+c+' nextPage" type="button" id="'+b.nextPageId+'" value="'+a.bsgridLanguage.pagingToolbar.nextPage+'" />');d.append("&nbsp;&nbsp;");d.append('<input class="'+c+' lastPage" type="button" id="'+b.lastPageId+'" value="'+a.bsgridLanguage.pagingToolbar.lastPage+'" />');d.append("</td>");d.append("<td>");d.append('<input type="text" id="'+b.gotoPageInputId+'" style="width: 40px" />');d.append("&nbsp;");d.append('<input class="'+c+' gotoPage" type="button" id="'+b.gotoPageId+'" value="'+a.bsgridLanguage.pagingToolbar.gotoPage+'" />');d.append("</td>");d.append("</tr>");d.append("</table>");return d.toString()},setPagingToolbarEvents:function(b){if(b.settings.pageSizeSelect){a.fn.bsgrid_paging.resetPerPageValues(b);a("#"+b.pageSizeId).change(function(){b.settings.pageSize=parseInt(a(this).val());a(this).trigger("blur");a.fn.bsgrid_paging.page(1,b)})}a("#"+b.firstPageId).click(function(){a.fn.bsgrid_paging.firstPage(b)});a("#"+b.prevPageId).click(function(){a.fn.bsgrid_paging.prevPage(b)});a("#"+b.nextPageId).click(function(){a.fn.bsgrid_paging.nextPage(b)});a("#"+b.lastPageId).click(function(){a.fn.bsgrid_paging.lastPage(b)});a("#"+b.gotoPageInputId).keyup(function(c){if(c.which==13){a.fn.bsgrid_paging.gotoPage(b)}});a("#"+b.gotoPageId).click(function(){a.fn.bsgrid_paging.gotoPage(b)})},dynamicChangePagingButtonStyle:function(b){var c="disabledCls";if(b.curPage<=1){a("#"+b.firstPageId).addClass(c);a("#"+b.prevPageId).addClass(c)}else{a("#"+b.firstPageId).removeClass(c);a("#"+b.prevPageId).removeClass(c)}if(b.curPage>=b.totalPages){a("#"+b.nextPageId).addClass(c);a("#"+b.lastPageId).addClass(c)}else{a("#"+b.nextPageId).removeClass(c);a("#"+b.lastPageId).removeClass(c)}},resetPerPageValues:function(b){var e=false;var f=b.settings.pageSizeForGrid;f.sort(function(h,g){return h-g});var d=a("#"+b.pageSizeId)[0];for(var c=0;c<f.length;c++){if(f[c]==b.settings.pageSize){d.options[c]=new Option(f[c],f[c],true,true);e=true}else{d.options[c]=new Option(f[c],f[c])}}if(!e){b.settings.pageSizeForGrid=f[0]}},setPagingValues:function(i,g,f){var b=f.settings.pageSize;var h=parseInt(g/b);h=parseInt((g%b==0)?h:h+1);var e=(i*b<g)?b:(g-(i-1)*b);var d=(i-1)*b+1;var c=(i-1)*b+e;d=e<=0?0:d;c=e<=0?0:c;f.totalRows=g;f.totalPages=h;f.curPage=i;f.curPageRowsNum=e;f.startRow=d;f.endRow=c;a("#"+f.totalRowsId).html(f.totalRows);a("#"+f.totalPagesId).html(f.totalPages);a("#"+f.curPageId).html(f.curPage);a("#"+f.startRowId).html(f.startRow);a("#"+f.endRowId).html(f.endRow);a.fn.bsgrid_paging.dynamicChangePagingButtonStyle(f)}}})(jQuery);